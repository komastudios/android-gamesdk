{
  "auto_run": false,
  "delay_between_tests": "5000ms",
  "host": "SwappyGLHostActivity",
  "defaultMonitors": [
    {
      "id": "MonitorOperation"
    }
  ],
  "stress_tests": [
    {
      "enabled": true,
      "name": "MemoryAccessTest",
      "description": "Tests accessing preallocated memory",
      "duration": "10s",
      "data_gatherer": {
        "id": "MemoryAccessOperation",
        "configuration": {
          "buffer_size": 1048576,
          "operations": [
            {
              "read_write": "Write",
              "rw_size": 256,
              "operation_type": "Fixed",
              "config": {
                "threads": "Single Core",
                "advance": 256
              }
            },
            {
              "read_write": "Read",
              "rw_size": 256,
              "operation_type": "Fixed",
              "config": {
                "threads": "All Cores",
                "work_scheme": "Divided",
                "advance": 512
              }
            },
            {
              "read_write": "Write",
              "rw_size": 128,
              "operation_type": "Fixed",
              "config": {
                "threads": "All Cores",
                "work_scheme": "Interleaved",
                "advance": 256,
                "initial_offset": 1024
              }
            },
            {
              "read_write": "Write",
              "rw_size": 256,
              "operation_type": "Fixed",
              "config": {
                "threads": "All Cores",
                "work_scheme": "Divided",
                "times": 23,
                "advance": 512,
                "initial_offset": 256
              }
            },
            {
              "read_write": "Read",
              "rw_size": 128,
              "operation_type": "Fixed",
              "config": {
                "threads": "All Cores",
                "work_scheme": "Interleaved",
                "times": 7,
                "advance": 256,
                "initial_offset": 1024
              }
            },

            {
              "read_write": "Read",
              "rw_size": 56,
              "operation_type": "Irregular",
              "config": {
                "times": 200,
                "rw_align": 32,
                "min_advance": 0,
                "max_advance": 1000
              }
            },

            {
              "read_write": "Read",
              "rw_size": 56,
              "operation_type": "Random",
              "config": {
                "times": 200,
                "rw_align": 32
              }
            },

            {
              "read_write": "Read",
              "rw_size": 56,
              "operation_type": "Greedy",
              "config": {
                "advance": 64
              }
            }
          ]
        }
      },
      "stressors": []
    },
    {
      "enabled": true,
      "name": "Affinity Test",
      "description": "Attempts to set affinity to each available processor and validate our selection 'sticks'.",
      "duration": "10s",
      "data_gatherer": {
        "id": "ScheduleAffinityOperation",
        "configuration": {
          "thread_count": 4,
          "report_frequency": "200ms"
        }
      },
      "stressors": [
        {
          "id": "JsonManipulatorOperation",
          "configuration": {
            "json_asset_name": "JsonManipulatorOperation.json"
          }
        }
      ]
    },
    {
      "enabled": true,
      "name": "Vulkan memory write protection",
      "description": "mprotect available to make memore read-only",
      "host": "VulkanHostActivity",
      "duration": "100ms",
      "data_gatherer": {
        "id": "VulkanMprotectCheckOperation",
        "configuration": {
        }
      },
      "stressors": [
      ]
    },
    {
      "enabled": true,
      "name": "Java test, c++ Stressor",
      "description": "Single java test, single c++ stressor",
      "duration": "10sec",
      "data_gatherer": {
        "id": "JsonManipulatorOperation",
        "configuration": {
          "json_asset_name": "JsonManipulatorOperation.json",
          "performance_sample_period": "500ms"
        }
      },
      "stressors": [
        {
          "id": "CalculatePIOperation",
          "enabled": true,
          "configuration": {
            "threads": 0,
            "affinity": true
          }
        }
      ]
    },
    {
      "enabled": true,
      "name": "C++ Test, Java Stressor",
      "description": "Single C++ test, single Java stressor",
      "duration": "10s",
      "data_gatherer": {
        "id": "CalculatePIOperation",
        "configuration": {
          "threads": 0,
          "performance_sample_period": "500ms",
          "affinity": true
        }
      },
      "stressors": [
      ]
    },
    {
      "enabled": true,
      "name": "GPU fill rate & CPU stressor",
      "description": "Draws a ton of textured quads via swappy gl while calculating PI in background",
      "duration": "0.5m",
      "data_gatherer": {
        "id": "FillRateGLES3Operation",
        "configuration": {
          "num_quads": 256,
          "quad_size": 64,
          "instances_per_renderer": 128,
          "blending": true,
          "increment": {
            "period": "5sec",
            "num_quads_increment": 256,
            "quad_size_increment": 64
          },
          "min_fps_threshold": 15
        }
      },
      "stressors": [
        {
          "id": "CalculatePIOperation",
          "enabled": true,
          "configuration": {
            "threads": 0,
            "affinity": true
          }
        }
      ]
    },
    {
      "enabled": true,
      "name": "Vertex streaming",
      "description": "Streams vertices to draw each frame",
      "duration": "1m",
      "data_gatherer": {
        "id": "StreamDrawGLES3Operation",
        "configuration": {
          "count": 1,
          "rows": 128,
          "cols": 128,
          "minimizeFragmentOverhead": true,
          "increment": {
            "period": "2sec",
            "increment": 1
          },
          "min_fps_threshold": 15
        }
      },
      "stressors": [
      ]
    },
    {
      "enabled": true,
      "name": "Scheduler",
      "description": "Schedules a thread to run and measures error in scheduling",
      "duration": "5s",
      "data_gatherer": {
        "id": "ThreadSchedulingOperation",
        "configuration": {
          "threads": [
            {
              "cpu_id": 0,
              "scheduled_delay": "500ms"
            },
            {
              "cpu_id": -1,
              "scheduled_delay": "500ms"
            }
          ]
        }
      },
      "stressors": [
      ]
    },
    {
      "enabled": true,
      "name": "Teapot",
      "description": "Just drawing teapots",
      "duration": "1000ms",
      "data_gatherer": {
        "id": "TeapotRendererGLES3Operation",
        "configuration": {
          "count": 216,
          "min_fps_threshold": 15
        }
      },
      "stressors": [
      ]
    },
    {
      "enabled": true,
      "name": "Memory allocation",
      "description": "Port of istressor",
      "duration": "1m",
      "data_gatherer": {
        "id": "MemoryAllocOperation",
        "configuration": {
          "scenario": "commit_limit",
          "alloc_size_bytes": 10485760,
          "alloc_period": "100ms",
          "restart_pause": "1000ms",
          "on_trim_triggers_free": true
        }
      },
      "stressors": [
      ]
    },
    {
      "enabled": true,
      "name": "HalfFloatPrecisionGLES3Operation",
      "description": "Draw Squad and test with Half precision",
      "duration": "0.5m",
      "data_gatherer": {
        "id": "HalfFloatPrecisionGLES3Operation",
        "configuration": {
          "alloc_size_bytes": 10485760,
          "alloc_period": "100ms",
          "restart_pause": "1000ms",
          "on_trim_triggers_free": true
        }
      },
      "stressors": [
      ]
    }
  ]
}